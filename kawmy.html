<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…Ø§Ø³Ø­ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Dynamsoft barcode reader -->
<script src="https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.6.20/dist/dbr.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body {
    background: #f1f5f9;
    font-family: 'Cairo', sans-serif;
    text-align: center;
    padding: 20px;
}

video {
    width: 340px;
    border: 3px solid #0f3c67;
    border-radius: 12px;
    background: #000;
}

input {
    width: 340px;
    padding: 12px;
    margin-top: 10px;
    font-size: 22px;
    text-align: center;
    border-radius: 10px;
    border: 2px solid #0f3c67;
}

#success {
    display: none;
    margin-top: 15px;
    background: #0f3c67;
    color: #fff;
    padding: 12px;
    border-radius: 10px;
}
</style>
</head>

<body>

<h2>Ù‚Ø§Ø±Ø¦ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ</h2>

<div id="scanner-container"></div>

<input id="nid" type="text" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§">

<div id="success">âœ”ï¸ ØªÙ…Øª Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ø¨Ù†Ø¬Ø§Ø­</div>

<script>
function toArabic(n){
    return n.replace(/[0-9]/g, d=>"Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©"[d]);
}

(async()=>{

    // ğŸ” Ø¶Ø¹ Ø§Ù„ØªØ±Ø®ÙŠØµ Ù‡Ù†Ø§
    Dynamsoft.DBR.BarcodeReader.license = "DLS2eyJoYW5kc2hha2VDb2RlIjoiMTA0ODY2MTM2LU1UQTBPRFkyTVRNMkxYZGxZaTFVY21saGJGQnliMm8iLCJtYWluU2VydmVyVVJMIjoiaHR0cHM6Ly9tZGxzLmR5bmFtc29mdG9ubGluZS5jb20iLCJvcmdhbml6YXRpb25JRCI6IjEwNDg2NjEzNiIsInN0YW5kYnlTZXJ2ZXJVUkwiOiJodHRwczovL3NkbHMuZHluYW1zb2Z0b25saW5lLmNvbSIsImNoZWNrQ29kZSI6LTE3MDIzNzIyNzh9

";

    Dynamsoft.DBR.BarcodeReader.engineResourcePath =
        "https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.6.20/dist/";

    let scanner = await Dynamsoft.DBR.BarcodeScanner.createInstance();

    // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ©
    await scanner.updateVideoSettings({ facingMode: "environment" });

    scanner.onUniqueRead = (txt)=>{
        let clean = txt.replace(/\D/g, "").substring(0,14);
        document.getElementById("nid").value = toArabic(clean);

        document.getElementById("success").style.display = "block";

        scanner.stopScanning();
    };

    document.getElementById("scanner-container").appendChild(scanner.getUIElement());
    await scanner.show();
})();
</script>

</body>
</html>
