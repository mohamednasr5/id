<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø· - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„ Ù…Ø­Ù…Ù„Ø©</title>
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
        import { getDatabase, ref, set, get, child, update } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyCukelnhazTegzc77ACCTe5QtbILplz_z4",
            authDomain: "embarh-e38da.firebaseapp.com",
            databaseURL: "https://embarh-e38da-default-rtdb.firebaseio.com",
            projectId: "embarh-e38da",
            storageBucket: "embarh-e38da.firebasestorage.app",
            messagingSenderId: "431984082366",
            appId: "1:431984082366:web:faa10521ebfdeb20680def",
            measurementId: "G-24MSESVMP5"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        
        window.firebaseDatabase = database;
        window.firebaseRef = ref;
        window.firebaseSet = set;
        window.firebaseGet = get;
        window.firebaseChild = child;
        window.firebaseUpdate = update;
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 25px;
            text-align: center;
            border: 3px solid #4a90e2;
        }

        .header h1 {
            font-size: 2.8rem;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            font-size: 1.2rem;
            color: #666;
        }

        .date-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .date-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .date-box label {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .date-box input {
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s ease;
            border-top: 5px solid;
        }

        .summary-card:hover {
            transform: translateY(-5px);
        }

        .summary-card.total {
            border-color: #3498db;
        }

        .summary-card.average {
            border-color: #2ecc71;
        }

        .summary-card.difference {
            border-color: #e74c3c;
        }

        .summary-card.votes {
            border-color: #9b59b6;
        }

        .summary-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .summary-card .value {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .summary-card .value.positive {
            color: #27ae60;
        }

        .summary-card .value.negative {
            color: #e74c3c;
        }

        .summary-card .value.neutral {
            color: #7f8c8d;
        }

        .summary-card .value.votes {
            color: #9b59b6;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .point-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
            position: relative;
            overflow: hidden;
        }

        .point-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border-color: #3498db;
        }

        .point-card.active {
            border-color: #2ecc71;
            background: linear-gradient(135deg, #f8fff8 0%, #ffffff 100%);
        }

        .point-card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
            font-size: 1.2rem;
            text-align: center;
            position: relative;
        }

        .point-card h3:after {
            content: '';
            position: absolute;
            bottom: -2px;
            right: 0;
            width: 80px;
            height: 2px;
            background: #f39c12;
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .input-group label i {
            color: #3498db;
        }

        .input-group input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            text-align: center;
            transition: all 0.3s ease;
            background: #f9f9f9;
        }

        .input-group input:focus {
            border-color: #3498db;
            background: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        .input-group input.changed {
            background: #fff9e6;
            border-color: #f39c12;
        }

        .calculations-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .calculation-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #ddd;
        }

        .calculation-box h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .calculation-value {
            font-size: 1.6rem;
            font-weight: bold;
            padding: 10px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calculation-value.difference {
            font-size: 1.8rem;
        }

        .calculation-value.votes {
            font-size: 1.4rem;
            color: #9b59b6;
        }

        .calculation-value.positive {
            color: #27ae60;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }

        .calculation-value.negative {
            color: #e74c3c;
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        }

        .calculation-value.neutral {
            color: #7f8c8d;
            background: #f8f9fa;
        }

        .point-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            font-size: 0.9rem;
            color: #666;
        }

        .last-updated {
            font-style: italic;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
        }

        .status-indicator.saved {
            background: #2ecc71;
        }

        .status-indicator.pending {
            background: #f39c12;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .notification-bar {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            display: none;
        }

        .notification-bar.show {
            display: flex;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .notification-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
        }

        .notification-icon.success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }

        .notification-icon.error {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 180px;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(46, 204, 113, 0.3);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #d35400);
            color: white;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(243, 156, 18, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(231, 76, 60, 0.3);
        }

        .btn-info {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
        }

        .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(155, 89, 182, 0.3);
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 50px auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .search-box {
            margin: 20px 0;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            background: white url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="%233498db" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>') no-repeat 15px center;
        }

        .search-box input:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .filter-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .filter-btn:hover {
            border-color: #3498db;
        }

        .votes-info {
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: 1fr;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .calculations-container {
                grid-template-columns: 1fr;
            }
            
            .date-controls {
                flex-direction: column;
            }
            
            .btn {
                min-width: 100%;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø· - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„ Ù…Ø­Ù…Ù„Ø©</h1>
            <p>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„ Ù…Ø­Ù…Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹ - Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ ÙˆØ§Ù„Ø£ØµÙˆØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>
            
            <div class="date-controls">
                <div class="date-box">
                    <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…:</label>
                    <input type="date" id="currentDate" value="">
                </div>
                
                <div class="date-box">
                    <label>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù:</label>
                    <input type="text" id="supervisorName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù">
                </div>
            </div>
        </div>

        <div class="summary-cards">
            <div class="summary-card total">
                <h3>ğŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</h3>
                <div class="value" id="totalSum">0.00</div>
                <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø¬Ù…Ø¹Ø©</p>
            </div>
            
            <div class="summary-card average">
                <h3>ğŸ“ˆ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
                <div class="value" id="dailyAverage">0.00</div>
                <p>Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ù„ÙƒÙ„ ÙŠÙˆÙ…</p>
            </div>
            
            <div class="summary-card difference">
                <h3>âš–ï¸ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±Ù‚</h3>
                <div class="value neutral" id="totalDifference">0.00</div>
                <p>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±ÙˆÙ‚ Ø¨ÙŠÙ† Ø§Ù„Ø£ÙŠØ§Ù…</p>
            </div>

            <div class="summary-card votes">
                <h3>ğŸ—³ï¸ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆØ§Øª</h3>
                <div class="value votes" id="totalVotes">0</div>
                <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª (Ø§Ù„ÙØ±Ù‚ Ã· 200)</p>
            </div>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù†Ù‚Ø·Ø© Ù…Ø¹ÙŠÙ†Ø©...">
        </div>

        <div class="filter-buttons">
            <button class="filter-btn active" onclick="filterPoints('all')">Ø§Ù„ÙƒÙ„</button>
            <button class="filter-btn" onclick="filterPoints('positive')">Ø²ÙŠØ§Ø¯Ø©</button>
            <button class="filter-btn" onclick="filterPoints('negative')">Ù†Ù‚ØµØ§Ù†</button>
            <button class="filter-btn" onclick="filterPoints('empty')">ØºÙŠØ± Ù…ÙƒØªÙ…Ù„</button>
        </div>

        <div class="loader" id="mainLoader"></div>
        
        <div class="grid-container" id="pointsGrid">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù†Ù‚Ø§Ø· Ù‡Ù†Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
        </div>

        <div class="action-buttons">
            <button class="btn btn-info" onclick="loadDay1Data()">
                ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„
            </button>
            <button class="btn btn-primary" onclick="saveAllData()">
                ğŸ’¾ Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            </button>
            <button class="btn btn-success" onclick="loadSavedData()">
                ğŸ”„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            </button>
            <button class="btn btn-warning" onclick="exportToExcel()">
                ğŸ“Š ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel
            </button>
            <button class="btn btn-danger" onclick="clearAllData()">
                ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
            </button>
        </div>
    </div>

    <div class="notification-bar" id="notificationBar">
        <div class="notification-content">
            <div class="notification-icon success" id="notificationIcon">âœ“</div>
            <div class="notification-text">
                <h4 id="notificationTitle">ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­</h4>
                <p id="notificationMessage">ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
            </div>
        </div>
        <button class="btn btn-primary" onclick="hideNotification()">Ù…ÙˆØ§ÙÙ‚</button>
    </div>

    <script>
        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
        const points = [
            "1- Ø´Ø±ÙŠÙ† - Ø§Ù„Ù…Ø·Ø±ÙŠØ©",
            "2- Ø­ÙŠ Ø§Ù„Ø­Ù…Ø²Ø§ÙˆÙŠ - Ø­Ù…Ø§Ø¯Ù‡ Ø¹Ø¨Ø¯Ù‡ Ù…ØµØ¨Ø§Ø­",
            "3- Ø­ÙŠ Ø§Ù„Ø¬Ø±Ù† 1 - Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ø¸Ù„ÙˆÙ…",
            "4- Ø­ÙŠ Ø§Ù„Ø¬Ø±Ù† 2 - Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… ÙÙ‡ÙŠØ¯",
            "5- Ø¨Ø§Ù‡ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ¯ÙŠ",
            "6- Ø­ÙŠ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ù… - Ø­Ù…Ø§Ø¯Ø© Ø£Ø¨Ùˆ Ø±Ø´Ø§Ø¯",
            "7- Ø­ÙŠ Ø§Ù„Ø¹Ø²Ø¨Ø© - Ù…Ù†Ø´ÙŠØ© Ù†Ø§ØµØ±",
            "8- Ø¨Ø­Ø± Ø§Ù„Ø¨Ù„Ø¯ 2 - Ø§Ù„Ø³Ø¹ÙŠØ¯ Ø£Ø¨Ùˆ Ø£Ù…ÙŠÙ† ",
            "9- Ø­ÙŠ Ø§Ù„Ù…Ù†Ø²Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© - ÙƒØ±ÙŠÙ… Ø´Ù‚Ø±Ù",
            "10- Ø­ÙŠ Ø§Ù„Ù…Ù†Ø²Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 2 - Ø´Ø±ÙŠÙ Ø¯Ø¨Ø±ÙŠØ§Ø´",
            "11- Ø­ÙŠ Ø¨Ø­Ø± Ø§Ù„Ø¨Ù„Ø¯ 3 - Ø£Ø®Ø± Ø´Ø§Ø±Ø¹ 10",
            "12- Ø­ÙŠ Ø¨Ø­Ø± Ø§Ù„Ø¨Ù„Ø¯ 1 - Ø´Ø§Ø±Ø¹ Ø§Ù„ÙƒØ§Ø¨ØªÙ†",
            "13- Ø­ÙŠ Ø§Ù„ÙÙ‚Ø§Ø¹ÙŠ - Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… ØºØ²Ù„",
            "14- Ø­ÙŠ Ø§Ù„Ø³Ù„Ù…ÙˆÙ†ÙŠ - Ø­Ø³Ù† Ø§Ù„Ù…Ù†Ø§Ø®Ù„ÙŠ",
            "15- Ø­ÙŠ Ø§Ù„ÙƒÙØ± 1 - Ø§Ù„Ø³Ø§Ø­Ø©",
            "16- Ø­ÙŠ Ø§Ù„ÙƒÙØ± 3 - Ù…Ù„Ø¹Ø¨ Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©",
            "17- Ø­ÙŠ Ø§Ù„ÙƒÙØ± 2 - ØªØ­Øª Ø§Ù„Ø³ÙƒØ©",
            "18- Ø­ÙŠ Ø§Ù„ÙØ¯Ø§Ø¡ 1 - Ø­Ù…Ø§Ø¯Ø© Ø§Ù„ÙƒÙŠØ§Ù„",
            "19- Ø­ÙŠ Ø³ÙˆÙ‚ Ø§Ù„Ø¬Ù…Ù„Ø© - Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ø¹",
            "20- Ø­ÙŠ Ù†Ù‚Ø·Ø© Ø§Ù„Ø£Ù…Ø§Ù… Ø¹Ù„Ù‰",
            "21- Ø­ÙŠ Ø§Ù„Ø¨Ø± Ø§Ù„ØªØ§Ù†ÙŠ - Ø­ÙŠ Ø§Ù„Ø³Ù„Ø§Ù…",
            "22- Ø­ÙŠ Ø§Ù„Ø¨Ø± Ø§Ù„ØªØ§Ù†ÙŠ - Ø§Ù„Ù‡Ø§ÙˆÙŠØ³",
            "23- Ø­ÙŠ Ù…ØµÙ†Ø¹ Ø§Ù„Ø¨ØµÙ„ - ÙˆÙ„ÙŠØ¯ ÙÙ‡ÙŠØ¯",
            "24- Ø­ÙŠ Ù…Ø¯Ø±Ø³Ø© Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø§Ù„ Ø´Ù„Ø¨Ø§ÙŠØ©",
            "25- Ø­ÙŠ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© - Ø§Ù„Ø³ÙŠØ¯ Ø§Ù„Ø­Ø¯ÙŠØ¯ÙŠ",
            "26- Ø­ÙŠ Ø£Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„Ø©",
            "27- Ù‚Ø±ÙŠØ© Ø§Ù„ÙØ±ÙˆØ³Ø§Øª",
            "28- Ù‚Ø±ÙŠØ© Ø£Ø¨Ùˆ Ø§Ù„Ø£Ø®Ø¶Ø±",
            "29- Ù‚Ø±ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…Ù†Ø²Ù„Ø©",
            "30- Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø±Ø©",
            "31- Ù‚Ø±ÙŠØ© Ù…ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©",
            "32- Ù‚Ø±ÙŠØ© Ø¹Ø±Ø¨ Ø²ÙŠØ¯Ø§Ù†",
            "33- Ù‚Ø±ÙŠØ© Ø§Ù„Ø³ØªØ§ÙŠØªØ©",
            "34- Ù‚Ø±ÙŠØ© ÙƒÙØ± Ø­Ø¬Ø§Ø¬",
            "35- Ù‚Ø±ÙŠØ© Ù…ÙŠØª Ø®Ø¶ÙŠØ±",
            "36- Ù‚Ø±ÙŠØ© Ø§Ù„Ù…ÙˆØ§Ø¬Ø¯",
            "37- Ù‚Ø±ÙŠØ© Ø§Ù„Ø¨ØµØ±Ø§Ø·",
            "38- Ù‚Ø±ÙŠØ© Ù…ÙŠØª Ø´Ø±ÙŠÙ",
            "39- Ù‚Ø±ÙŠØ© Ø§Ù„Ø·ÙˆØ§Ø¨Ø±Ø©",
            "40- Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ù…Ø§Ø±Ù†Ø©",
            "41- Ù‚Ø±ÙŠØ© Ø£ÙˆÙ„Ø§Ø¯ Ø¨Ø§Ù†Ø§",
            "42- Ù‚Ø±ÙŠØ© Ø£ÙˆÙ„Ø§Ø¯ Ø­Ø§Ù†Ø§",
            "43- Ø¨Ø­Ø± Ø­Ø§Ø¯ÙˆØ«",
            "44- Ù‚Ø±ÙŠØ© Ø§Ù„Ù‚Ø²Ø§Ù‚Ø²Ø©",
            "45- Ù‚Ø±ÙŠØ© Ø§Ù„Ø­ÙˆØªØ©",
            "46- Ù‚Ø±ÙŠØ© Ø£ÙˆÙ„Ø§Ø¯ Ù†ÙˆØ±",
            "47- Ù‚Ø±ÙŠØ© Ø§Ù„Ø®Ù„Ø§ÙŠÙØ©",
            "48- Ù‚Ø±ÙŠØ© Ø§Ù„Ù‚Ø·Ø´Ø©",
            "49- Ù‚Ø±ÙŠØ© Ø§Ù„Ø¬Ù…Ø§Ù…Ù„Ø©",
            "50- Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ø²ÙŠØ²Ø©",
            "51- Ù‚Ø±ÙŠØ© Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠØ©",
            "52- Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨Ø§Ù†",
            "53- Ù‚Ø±ÙŠØ© Ø£ÙˆÙ„Ø§Ø¯ Ø¹Ù„Ù…",
            "54- Ù‚Ø±ÙŠØ© Ø£ÙˆÙ„Ø§Ø¯ Ù†Ø§ØµØ±",
            "55- Ù‚Ø±ÙŠØ© Ø¨Ù†ÙŠ Ù‡Ù„Ø§Ù„",
            "56- Ù‚Ø±ÙŠØ© Ø§Ù„Ø´Ø¨ÙˆÙ„",
            "57- Ù‚Ø±ÙŠØ© Ø§Ù„Ø±ÙˆØ¯Ø©",
            "58- Ù‚Ø±ÙŠØ© Ø§Ù„Ù†Ø³Ø§ÙŠÙ…Ø©",
            "59- Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹ØµØ§ÙØ±Ø©",
            "60- Ù‚Ø±ÙŠØ© Ø§Ù„Ø¶Ù‡ÙŠØ±",
            "61- Ø§Ù„Ø¬Ù…Ø¹ÙŠØ© - Ø§Ù„Ù…Ø·Ø±ÙŠØ©",
            "62- Ù…ØµÙ†Ø¹ ÙˆØ§Ø¦Ù„ Ø´Ø­Ø§ØªÙ‡ - Ù…Ø­Ù…ÙˆØ¯ Ø¹Ø±ÙˆØ³",
            "63- Ù…Ù†Ø·Ù‚Ø© Ø³ÙˆØ§Ø±ÙŠÙ‡ - ÙØ§Ø·Ù…Ø© Ø§Ù„Ø­ÙˆØª",
            "64- Ø§Ù„Ø¬Ø³Ø± Ø§Ù„ÙˆØ§Ù‚ÙŠ - Ù…Ø­Ù…ÙˆØ¯ Ù…Ø­Ù…Ø¯ Ø£Ø¨Ùˆ Ø§Ù„Ù†Ø¬Ø§",
            "65- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø­Ù…Ø§ÙŠØ¯Ø©- Ù…ØµØ·ÙÙŠ ÙƒÙ…Ø§Ù„",
            "66- Ù…ÙƒØªØ¨Ø© ÙÙŠØ§Ø¶ - Ø­Ø³Ù† ÙÙŠØ§Ø¶",
            "67- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³Ø­Ø§Ø±ÙˆØ© - Ù†ØµØ± Ø§Ù„Ø³Ø­Ø§Ø±ÙˆÙŠ",
            "68- Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ø´Ø±ÙŠÙÙŠØ© Ø§Ù„Ø¹ØµØ§ÙØ±Ø© -Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„",
            "69- Ø¹ØµØ§Ù… Ø´ØªØ§ Ø§Ù„Ø¶Ù‡ÙŠØ±",
            "70- Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© - Ø¬Ù…Ø§Ù„ Ø­Ø§Ù…Ø¯ ",
            "71- Ø§Ù„Ø¹Ù‚ÙˆØ¨ÙŠÙ† - Ø­Ù…Ø§Ø¯Ø© Ø­ÙˆØ§Ù„Ù‡",
            "72- Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø± - Ù…Ø­Ù…Ø¯ ÙØ§Ø±ÙˆÙ‚",
            "73- Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø¨Ù†Ø§Øª",
            "74-Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„Ø¯ÙŠÙ†ÙŠ",
            "75- Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚",
            "76- Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ø£Ø­Ù…Ø¯ Ù…Ø§Ù‡Ø±",
            "77- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ø·Ø§Ø±Ù‚ Ø¨Ù† Ø²ÙŠØ§Ø¯",
            "78- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ø¹Ø«Ù…Ø§Ù† Ø¨Ù† Ø¹ÙØ§Ù†",
            "79- Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯",
            "80- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ø§Ù„Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ©",
            "81- Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ø¹Ù„Ù‰ ÙˆÙ„ÙŠØ¯ ",
            "82-Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ø£Ø­Ù…Ø¯ ØµÙŠØ§Ù… ",
            "83- Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ø²ÙŠØ§Ø¯ Ø­Ø¨Ø´ÙŠ",
            "84- Ø§Ù„Ù…Ø·Ø±ÙŠØ© - Ù…ØµØ·ÙÙ‰ Ø§Ù„Ù†Ø¬Ø¯ÙŠ",
            "85- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 24",
            "86- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 25",
            "87- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 26",
            "88- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 27",
            "89- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 28",
            "90- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 29",
            "91- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 30",
            "92- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 31",
            "93- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 32",
            "94- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 33",
            "95- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 34",
            "96- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 35",
            "97- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 36",
            "98- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 37",
            "99- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 38",
            "100- Ø§Ù„Ù…Ø·Ø±ÙŠØ© Ù†Ù‚Ø·Ø© Ø±Ù‚Ù… 39"
        ];

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„ØªÙŠ Ù‚Ø¯Ù…ØªÙ‡Ø§
        const day1Data = {
            1: 83800,
            2: 125600,
            3: 55200,
            4: 65800,
            5: 217400,
            6: 116400,
            7: 125200,
            8: 67200,
            9: 136800,
            10: 83600,
            11: 167600,
            12: 85800,
            13: 86200,
            14: 99200,
            15: 128200,
            16: 43000,
            18: 116200,
            19: 127400,
            20: 54400,
            21: 30000,
            22: 60200,
            23: 38000,
            24: 67400,
            25: 22600,
            27: 100200,
            28: 44400,
            37: 82400,
            46: 36200,
            47: 4200,
            50: 400,
            54: 15400,
            56: 1600,
            58: 1400,
            62: 205800,
            63: 46800,
            64: 180600,
            65: 66400,
            67: 55000,
            68: 167600,
            70: 38600,
            71: 49000,
            72: 296200,
            86: 42400
        };

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        document.addEventListener('DOMContentLoaded', function() {
            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('currentDate').value = today;
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø·
            createPointCards();
            
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            setTimeout(loadDay1Data, 1500);
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ
            document.getElementById('searchInput').addEventListener('input', filterSearch);
        });

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø·
        function createPointCards() {
            const grid = document.getElementById('pointsGrid');
            grid.innerHTML = '';
            
            points.forEach((point, index) => {
                const card = document.createElement('div');
                card.className = 'point-card';
                card.id = `point-${index + 1}`;
                card.innerHTML = `
                    <h3>${point}</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label><i>ğŸ“…</i> Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„:</label>
                            <input type="number" 
                                   class="day1-input" 
                                   data-point="${index + 1}"
                                   placeholder="0.00" 
                                   step="0.01"
                                   oninput="calculatePointDifference(${index + 1}, this.value, 'day1')">
                        </div>
                        <div class="input-group">
                            <label><i>ğŸ“…</i> Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ:</label>
                            <input type="number" 
                                   class="day2-input" 
                                   data-point="${index + 1}"
                                   placeholder="Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ" 
                                   step="0.01"
                                   oninput="calculatePointDifference(${index + 1}, this.value, 'day2')">
                        </div>
                    </div>
                    
                    <div class="calculations-container">
                        <div class="calculation-box">
                            <h4>Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠÙ†</h4>
                            <div class="calculation-value difference neutral" id="diff-${index + 1}">0.00</div>
                        </div>
                        
                        <div class="calculation-box">
                            <h4>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h4>
                            <div class="calculation-value votes" id="votes-${index + 1}">0</div>
                            <div class="votes-info">(Ø§Ù„ÙØ±Ù‚ Ã· 200)</div>
                        </div>
                    </div>
                    
                    <div class="point-status">
                        <span class="last-updated" id="updated-${index + 1}">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ</span>
                        <div class="status-indicator" id="status-${index + 1}"></div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„
        function loadDay1Data() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„...', 'success');
            
            // ØªØ¹Ø¨Ø¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„
            Object.keys(day1Data).forEach(pointNumber => {
                const card = document.getElementById(`point-${pointNumber}`);
                if (card) {
                    const day1Input = card.querySelector('.day1-input');
                    day1Input.value = day1Data[pointNumber];
                    
                    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‚Ø·Ø©
                    const statusElement = document.getElementById(`status-${pointNumber}`);
                    statusElement.classList.remove('pending');
                    statusElement.classList.add('saved');
                    
                    document.getElementById(`updated-${pointNumber}`).textContent = 
                        `Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„ Ù…Ø­Ù…Ù„Ø© - ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ`;
                }
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            updateSummaryStatistics();
            
            showNotification('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¢Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ', 'success');
        }

        // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª Ù„Ù„Ù†Ù‚Ø·Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©
        function calculatePointDifference(pointNumber, value, field) {
            const card = document.getElementById(`point-${pointNumber}`);
            const day1Input = card.querySelector('.day1-input');
            const day2Input = card.querySelector('.day2-input');
            const diffElement = document.getElementById(`diff-${pointNumber}`);
            const votesElement = document.getElementById(`votes-${pointNumber}`);
            const statusElement = document.getElementById(`status-${pointNumber}`);
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØºÙŠÙŠØ±
            if (field === 'day1') {
                day1Input.classList.add('changed');
            } else {
                day2Input.classList.add('changed');
            }
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…
            const day1 = parseFloat(day1Input.value) || 0;
            const day2 = parseFloat(day2Input.value) || 0;
            const difference = day2 - day1;
            
            // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª (Ø§Ù„ÙØ±Ù‚ Ã· 200)
            const votes = Math.round(difference / 200);
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ÙØ±Ù‚
            diffElement.textContent = difference.toFixed(2);
            diffElement.className = 'calculation-value difference';
            
            if (difference > 0) {
                diffElement.classList.add('positive');
            } else if (difference < 0) {
                diffElement.classList.add('negative');
            } else {
                diffElement.classList.add('neutral');
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª
            votesElement.textContent = votes;
            votesElement.className = 'calculation-value votes';
            
            if (votes > 0) {
                votesElement.style.color = '#27ae60';
            } else if (votes < 0) {
                votesElement.style.color = '#e74c3c';
            } else {
                votesElement.style.color = '#9b59b6';
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‚Ø·Ø©
            statusElement.classList.remove('saved', 'pending');
            statusElement.classList.add('pending');
            
            // ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
            const now = new Date();
            document.getElementById(`updated-${pointNumber}`).textContent = 
                `Ø¢Ø®Ø± ØªØ¹Ø¯ÙŠÙ„: ${now.toLocaleTimeString('ar-EG')}`;
            
            // Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ† Ù…Ù† Ø¹Ø¯Ù… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
            clearTimeout(window.saveTimeout);
            window.saveTimeout = setTimeout(() => {
                savePointData(pointNumber);
            }, 2000);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
            updateSummaryStatistics();
        }

        // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ù‚Ø·Ø© Ù…Ø¹ÙŠÙ†Ø©
        async function savePointData(pointNumber) {
            const card = document.getElementById(`point-${pointNumber}`);
            const day1Input = card.querySelector('.day1-input');
            const day2Input = card.querySelector('.day2-input');
            const diffElement = document.getElementById(`diff-${pointNumber}`);
            const votesElement = document.getElementById(`votes-${pointNumber}`);
            
            const pointName = points[pointNumber - 1];
            const date = document.getElementById('currentDate').value;
            const supervisor = document.getElementById('supervisorName').value;
            
            const day1 = parseFloat(day1Input.value) || 0;
            const day2 = parseFloat(day2Input.value) || 0;
            const difference = parseFloat(diffElement.textContent) || 0;
            const votes = parseInt(votesElement.textContent) || 0;
            
            try {
                const database = window.firebaseDatabase;
                const { ref, set } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js');
                
                const recordRef = ref(database, `daily_points/${date}/${pointNumber}`);
                
                const recordData = {
                    pointNumber: pointNumber,
                    pointName: pointName,
                    date: date,
                    supervisor: supervisor,
                    day1: day1,
                    day2: day2,
                    difference: difference,
                    votes: votes,
                    lastUpdated: new Date().toISOString(),
                    status: 'saved'
                };

                await set(recordRef, recordData);
                
                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‚Ø·Ø©
                const statusElement = document.getElementById(`status-${pointNumber}`);
                statusElement.classList.remove('pending');
                statusElement.classList.add('saved');
                
                // Ø¥Ø²Ø§Ù„Ø© ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØºÙŠÙŠØ±
                day1Input.classList.remove('changed');
                day2Input.classList.remove('changed');
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­ ØµØºÙŠØ±
                showNotification(`ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ù‚Ø·Ø© ${pointNumber}`, 'success');
                
            } catch (error) {
                console.error('Error saving point data:', error);
                showNotification(`Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù†Ù‚Ø·Ø© ${pointNumber}`, 'error');
            }
        }

        // Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function saveAllData() {
            const date = document.getElementById('currentDate').value;
            const supervisor = document.getElementById('supervisorName').value;
            
            if (!date) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            if (!supervisor) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù', 'error');
                return;
            }
            
            showNotification('Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'success');
            
            for (let i = 1; i <= points.length; i++) {
                await savePointData(i);
            }
            
            showNotification('ØªÙ… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        async function loadSavedData() {
            const date = document.getElementById('currentDate').value;
            const loader = document.getElementById('mainLoader');
            
            if (!date) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            loader.style.display = 'block';
            
            try {
                const database = window.firebaseDatabase;
                const { ref, get, child } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js');
                
                const dbRef = ref(database);
                const snapshot = await get(child(dbRef, `daily_points/${date}`));
                
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    
                    Object.keys(data).forEach(pointKey => {
                        const pointData = data[pointKey];
                        const pointNumber = pointData.pointNumber;
                        const card = document.getElementById(`point-${pointNumber}`);
                        
                        if (card) {
                            const day1Input = card.querySelector('.day1-input');
                            const day2Input = card.querySelector('.day2-input');
                            const statusElement = document.getElementById(`status-${pointNumber}`);
                            
                            day1Input.value = pointData.day1 || 0;
                            day2Input.value = pointData.day2 || 0;
                            
                            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ù‚ ÙˆØ§Ù„Ø£ØµÙˆØ§Øª
                            calculatePointDifference(pointNumber, pointData.day2, 'day2');
                            
                            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
                            statusElement.classList.remove('pending');
                            statusElement.classList.add('saved');
                            
                            document.getElementById(`updated-${pointNumber}`).textContent = 
                                `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${new Date(pointData.lastUpdated).toLocaleString('ar-EG')}`;
                        }
                    });
                    
                    showNotification(`ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ø±ÙŠØ® ${date}`, 'success');
                } else {
                    showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®', 'info');
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                updateSummaryStatistics();
                
            } catch (error) {
                console.error('Error loading data:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            } finally {
                loader.style.display = 'none';
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        function updateSummaryStatistics() {
            let totalSum = 0;
            let totalDay1 = 0;
            let totalDay2 = 0;
            let totalDifference = 0;
            let totalVotes = 0;
            let pointCount = 0;
            
            points.forEach((point, index) => {
                const card = document.getElementById(`point-${index + 1}`);
                if (card) {
                    const day1Input = card.querySelector('.day1-input');
                    const day2Input = card.querySelector('.day2-input');
                    const votesElement = document.getElementById(`votes-${index + 1}`);
                    
                    const day1 = parseFloat(day1Input.value) || 0;
                    const day2 = parseFloat(day2Input.value) || 0;
                    const votes = parseInt(votesElement.textContent) || 0;
                    
                    totalDay1 += day1;
                    totalDay2 += day2;
                    totalDifference += (day2 - day1);
                    totalVotes += votes;
                    
                    if (day1 > 0 || day2 > 0) {
                        pointCount++;
                    }
                }
            });
            
            totalSum = totalDay1 + totalDay2;
            const average = pointCount > 0 ? totalSum / (pointCount * 2) : 0;
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            document.getElementById('totalSum').textContent = totalSum.toFixed(2);
            document.getElementById('dailyAverage').textContent = average.toFixed(2);
            
            const totalDiffElement = document.getElementById('totalDifference');
            totalDiffElement.textContent = totalDifference.toFixed(2);
            totalDiffElement.className = 'value';
            
            if (totalDifference > 0) {
                totalDiffElement.classList.add('positive');
            } else if (totalDifference < 0) {
                totalDiffElement.classList.add('negative');
            } else {
                totalDiffElement.classList.add('neutral');
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆØ§Øª
            document.getElementById('totalVotes').textContent = totalVotes;
        }

        // ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel
        function exportToExcel() {
            const date = document.getElementById('currentDate').value;
            const supervisor = document.getElementById('supervisorName').value;
            
            let csv = 'Ø§Ù„Ù†Ù‚Ø·Ø©,Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„,Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ,Ø§Ù„ÙØ±Ù‚,Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª\n';
            
            points.forEach((point, index) => {
                const card = document.getElementById(`point-${index + 1}`);
                if (card) {
                    const day1Input = card.querySelector('.day1-input');
                    const day2Input = card.querySelector('.day2-input');
                    const diffElement = document.getElementById(`diff-${index + 1}`);
                    const votesElement = document.getElementById(`votes-${index + 1}`);
                    
                    const day1 = parseFloat(day1Input.value) || 0;
                    const day2 = parseFloat(day2Input.value) || 0;
                    const difference = diffElement.textContent;
                    const votes = votesElement.textContent;
                    
                    csv += `"${point}",${day1.toFixed(2)},${day2.toFixed(2)},${difference},${votes}\n`;
                }
            });
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù CSV
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', `Ù†Ù‚Ø§Ø·_${date}_${supervisor || 'ØºÙŠØ±_Ù…Ø¹Ø±ÙˆÙ'}.csv`);
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ù…Ù„Ù Excel', 'success');
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                points.forEach((point, index) => {
                    const card = document.getElementById(`point-${index + 1}`);
                    if (card) {
                        const day1Input = card.querySelector('.day1-input');
                        const day2Input = card.querySelector('.day2-input');
                        const diffElement = document.getElementById(`diff-${index + 1}`);
                        const votesElement = document.getElementById(`votes-${index + 1}`);
                        const statusElement = document.getElementById(`status-${index + 1}`);
                        
                        day1Input.value = '';
                        day2Input.value = '';
                        diffElement.textContent = '0.00';
                        diffElement.className = 'calculation-value difference neutral';
                        votesElement.textContent = '0';
                        votesElement.className = 'calculation-value votes';
                        statusElement.className = 'status-indicator';
                        
                        document.getElementById(`updated-${index + 1}`).textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«';
                    }
                });
                
                updateSummaryStatistics();
                showNotification('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            }
        }

        // ÙÙ„ØªØ±Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
        function filterPoints(type) {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            points.forEach((point, index) => {
                const card = document.getElementById(`point-${index + 1}`);
                const diffElement = document.getElementById(`diff-${index + 1}`);
                const day1Input = card.querySelector('.day1-input');
                const day2Input = card.querySelector('.day2-input');
                
                const day1 = parseFloat(day1Input.value) || 0;
                const day2 = parseFloat(day2Input.value) || 0;
                const difference = day2 - day1;
                
                let show = false;
                
                switch(type) {
                    case 'all':
                        show = true;
                        break;
                    case 'positive':
                        show = difference > 0;
                        break;
                    case 'negative':
                        show = difference < 0;
                        break;
                    case 'empty':
                        show = day2 === 0 || day2 === '';
                        break;
                }
                
                card.style.display = show ? 'block' : 'none';
            });
        }

        // Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù†Ù‚Ø§Ø·
        function filterSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            points.forEach((point, index) => {
                const card = document.getElementById(`point-${index + 1}`);
                
                if (point.toLowerCase().includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type) {
            const notificationBar = document.getElementById('notificationBar');
            const notificationTitle = document.getElementById('notificationTitle');
            const notificationMessage = document.getElementById('notificationMessage');
            const notificationIcon = document.getElementById('notificationIcon');
            
            notificationTitle.textContent = type === 'success' ? 'Ù†Ø¬Ø§Ø­' : 
                                          type === 'error' ? 'Ø®Ø·Ø£' : 
                                          type === 'info' ? 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª' : 'ØªÙ†Ø¨ÙŠÙ‡';
            
            notificationMessage.textContent = message;
            notificationIcon.className = `notification-icon ${type}`;
            notificationIcon.textContent = type === 'success' ? 'âœ“' : 
                                         type === 'error' ? 'âœ—' : 
                                         type === 'info' ? 'â„¹' : 'âš ';
            
            notificationBar.classList.add('show');
        }

        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
        function hideNotification() {
            document.getElementById('notificationBar').classList.remove('show');
        }

        // Ø¯Ø¹Ù… Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                saveAllData();
            }
            
            if (e.ctrlKey && e.key === 'e') {
                e.preventDefault();
                exportToExcel();
            }
            
            if (e.ctrlKey && e.key === 'f') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                loadDay1Data();
            }
        });

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±
        document.getElementById('currentDate').addEventListener('change', function() {
            loadSavedData();
        });
    </script>
</body>
</html>
