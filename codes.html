<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø£ÙƒÙˆØ§Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Firebase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #2c3e50;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .card {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      margin-bottom: 20px;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      text-align: center;
      color: #667eea;
      margin-bottom: 10px;
      font-size: 2em;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #2c3e50;
      font-size: 15px;
    }

    input[type="number"], input[type="password"] {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-family: 'Cairo', sans-serif;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 15px rgba(102, 126, 234, 0.2);
    }

    .input-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    .info-box {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border-left: 4px solid #2196f3;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 14px;
      line-height: 1.6;
    }

    .warning-box {
      background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
      border-left: 4px solid #ff9800;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 14px;
      line-height: 1.6;
    }

    .btn {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 50px;
      font-family: 'Cairo', sans-serif;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none !important;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      margin-bottom: 10px;
    }

    .btn-danger {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      margin-bottom: 10px;
    }

    .btn-success {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
    }

    .progress-container {
      display: none;
      margin-top: 20px;
    }

    .progress-container.active {
      display: block;
    }

    .progress-bar {
      width: 100%;
      height: 30px;
      background: #e0e0e0;
      border-radius: 15px;
      overflow: hidden;
      position: relative;
      margin-bottom: 15px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      width: 0%;
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 14px;
    }

    .progress-text {
      text-align: center;
      color: #666;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .log-container {
      background: #f8f9fa;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      padding: 15px;
      max-height: 300px;
      overflow-y: auto;
      font-size: 13px;
      font-family: 'Courier New', monospace;
    }

    .log-container::-webkit-scrollbar {
      width: 8px;
    }

    .log-container::-webkit-scrollbar-thumb {
      background: #667eea;
      border-radius: 4px;
    }

    .log-item {
      padding: 5px 0;
      border-bottom: 1px solid #e0e0e0;
    }

    .log-item:last-child {
      border-bottom: none;
    }

    .log-success {
      color: #4caf50;
    }

    .log-error {
      color: #f44336;
    }

    .log-info {
      color: #2196f3;
    }

    .log-warning {
      color: #ff9800;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .stat-box {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 15px;
      border-radius: 10px;
      text-align: center;
    }

    .stat-value {
      font-size: 2em;
      font-weight: 800;
      color: #667eea;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
    }

    .delay-selector {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 20px;
    }

    .delay-btn {
      flex: 1;
      padding: 10px;
      border: 2px solid #e0e0e0;
      background: white;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
    }

    .delay-btn.active {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .delay-btn:hover {
      border-color: #667eea;
    }

    @media (max-width: 768px) {
      .input-row {
        grid-template-columns: 1fr;
      }

      .container {
        padding: 10px;
      }

      .card {
        padding: 20px;
      }

      h1 {
        font-size: 1.5em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø£ÙƒÙˆØ§Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
      <p class="subtitle">Ù†Ø¸Ø§Ù… Ø¢Ù…Ù† Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªØ­Ø¯ÙŠØ« Ø£ÙƒÙˆØ§Ø¯ Firebase</p>

      <div class="warning-box">
        âš ï¸ <strong>ØªØ­Ø°ÙŠØ±:</strong> Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø³ØªÙ‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡/ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø£ÙƒÙˆØ§Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡.
      </div>

      <div class="form-group">
        <label>ğŸ” ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:</label>
        <input type="password" id="adminPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      </div>

      <div class="form-group">
        <label>âš¡ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙ†ÙÙŠØ° (Ø§Ù„ØªØ£Ø®ÙŠØ± Ø¨ÙŠÙ† ÙƒÙ„ ÙƒÙˆØ¯):</label>
        <div class="delay-selector">
          <button class="delay-btn" onclick="setDelay(100)">Ø³Ø±ÙŠØ¹<br><small>100ms</small></button>
          <button class="delay-btn active" onclick="setDelay(300)">Ø¹Ø§Ø¯ÙŠ<br><small>300ms</small></button>
          <button class="delay-btn" onclick="setDelay(500)">Ø¢Ù…Ù†<br><small>500ms</small></button>
          <button class="delay-btn" onclick="setDelay(1000)">Ø¨Ø·ÙŠØ¡<br><small>1000ms</small></button>
        </div>
      </div>

      <div class="info-box">
        ğŸ’¡ <strong>Ù†ØµÙŠØ­Ø©:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø³Ø±Ø¹Ø© "Ø¢Ù…Ù†" Ø£Ùˆ "Ø¨Ø·ÙŠØ¡" Ù„ØªØ¬Ù†Ø¨ Ø­Ø¸Ø± Firebase. Ø§Ù„Ø³Ø±Ø¹Ø© "Ø¹Ø§Ø¯ÙŠ" Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ.
      </div>

      <div class="form-group">
        <label>ğŸ“Š Ù†Ø·Ø§Ù‚ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯:</label>
        <div class="input-row">
          <div>
            <label style="font-size: 13px; color: #666;">Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ÙˆÙ„:</label>
            <input type="number" id="startCode" value="900901">
          </div>
          <div>
            <label style="font-size: 13px; color: #666;">Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£Ø®ÙŠØ±:</label>
            <input type="number" id="endCode" value="900967">
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>ğŸ” ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø«Ø§Ø¨Øª:</label>
        <input type="number" id="verifyCode" value="111111">
      </div>

      <div class="stats-grid">
        <div class="stat-box">
          <div class="stat-value" id="totalCodes">67</div>
          <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="estimatedTime">20s</div>
          <div class="stat-label">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
        </div>
      </div>

      <button class="btn btn-primary" id="startBtn" onclick="startSetup()">
        ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
      </button>

      <button class="btn btn-danger" id="stopBtn" onclick="stopSetup()" style="display: none;">
        â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù
      </button>

      <div class="progress-container" id="progressContainer">
        <div class="progress-text" id="progressText">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯...</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill">0%</div>
        </div>
        <div class="log-container" id="logContainer"></div>
      </div>
    </div>

    <div class="card">
      <h2 style="color: #667eea; margin-bottom: 15px;">ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ù…Ø§ÙƒÙ†</h2>
      <div class="info-box">
        Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù…Ø§ÙƒÙ†: <strong>67 Ù…ÙƒØ§Ù†</strong><br>
        Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø®Ø§ØµØ©:<br>
        â€¢ <strong>Ø±Ù‚Ù… 30:</strong> Ø§Ù„Ù…Ø²Ø±Ø¹Ø© (ÙƒÙˆØ¯: 900930)<br>
        â€¢ <strong>Ø±Ù‚Ù… 31:</strong> Ø£Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„Ø© (ÙƒÙˆØ¯: 900931)
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAxnIxtFeAOjYjCIrU5cwYVteuQ18K8Kjc",
      authDomain: "idmanazla.firebaseapp.com",
      databaseURL: "https://idmanazla-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "idmanazla",
      storageBucket: "idmanazla.firebasestorage.app",
      messagingSenderId: "408446131276",
      appId: "1:408446131276:web:976ae54181b5398de5a8e9"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù…Ø§ÙƒÙ† (67 Ù…ÙƒØ§Ù†)
    const places = [
      "Ø§Ù„Ù…Ù†Ø²Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 1 - ÙƒØ±ÙŠÙ… Ø§Ù„Ù…Ø±ÙˆØ±", "Ø§Ù„Ù…Ù†Ø²Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 2 - Ø´Ø±ÙŠÙ Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„ØµØ­ÙŠ",
      "Ø¨Ø­Ø± Ø§Ù„Ø¨Ù„Ø¯ Ø´Ø§Ø±Ø¹ Ø§Ù„ÙƒØ§Ø¨ØªÙ† - Ø´Ø±ÙŠÙ Ø§Ù„Ø¹Ø²Ø§Ø²ÙŠ", "Ù…Ø¯Ø±Ø³Ø© Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø§Ù„ Ø´Ù„Ø¨ÙŠØ§ÙŠØ© - Ø§Ø´Ø±Ù Ø§Ù„Ø£Ø¨Ø§ØµÙŠØ±ÙŠ",
      "Ù…ØµÙ†Ø¹ Ø§Ù„Ø¨ØµÙ„ - ÙØ¤Ø§Ø¯ Ø­Ø§Ù„", "Ø§Ù„ÙƒÙØ± 1 - Ø¹Ù„ÙŠ Ø´Ø·Ø§", "Ø§Ù„ÙƒÙØ± 2 ØªØ­Øª Ø§Ù„Ø³ÙƒØ© - Ø¹Ø§Ø¯Ù„ Ø¬Ù„Ø§Ù„",
      "Ø³ÙˆÙ‚ Ø§Ù„Ø¬Ù…Ù„Ø© - Ø§Ù„Ø³Ø¹ÙŠØ¯ Ø´Ø·Ø§- Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ø¹", "Ø§Ù„ÙØ¯Ø§Ø¡ 1 - Ø¹Ù…Ø± Ø§Ù„ÙƒÙŠØ§Ù„", "Ø§Ù„ÙØ¯Ø§Ø¡ 2 - Ø­Ù…Ø§Ø¯Ù‡ Ø§Ù„ÙƒÙŠØ§Ù„",
      "Ø§Ù„Ø­Ù…Ø²Ø§ÙˆÙŠ - Ø­Ù…Ø§Ø¯Ù‡ Ø§Ù„Ø³Ø±ÙŠ", "Ø§Ù„Ø¬Ø±Ù† 1 - Ø¨ÙˆØ¬ÙŠ Ø§Ù„Ø¨Ø±Ø¹ÙŠ", "Ø§Ù„Ø¬Ø±Ù† 2 - Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… ÙÙ‡ÙŠØ¯",
      "Ø§Ù„Ø¨Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ Ø­ÙŠ Ø§Ù„Ø³Ù„Ø§Ù… - ÙŠØ­ÙŠÙ‰ Ø­Ø¨Ù‚", "Ø­ÙŠ Ø§Ù„Ø£Ø¹Ø¬Ø§Ù… - Ø­Ù…Ø§Ø¯Ù‡ Ø§Ø¨Ùˆ Ø±Ø´Ø§Ø¯",
      "Ø§Ù„Ø¹Ø²Ø¨Ø© Ù…Ù†Ø´ÙŠØ© Ù†Ø§ØµØ± -Ø­Ø³Ø§Ù† Ø¹Ø·ÙŠØ©", "Ø§Ù„Ø·ÙˆÙŠÙ„ - Ø£Ø­Ù…Ø¯ Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø¸ÙŠÙ…",
      "Ø§Ù„Ø¨Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ 2 Ø§Ù„Ù‡Ø§ÙˆÙŠØ³ - Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø¬ÙŠØ¯", "Ø§Ù„ÙÙ‚Ø§Ø¹ÙŠ - Ù…Ø­Ù…Ø¯ Ø­Ø¨ÙŠØ¨",
      "Ø¨Ø­Ø± Ø§Ù„Ø¨Ù„Ø¯ 2 - Ø§Ù„Ø³ÙŠØ¯ Ø­Ø±Ø§Ø²", "Ø­ÙŠ Ø§Ù„Ø¬Ø¨Ø§Ù†Ø© - Ø³Ø¹Ø¯ Ø§Ù„Ø´Ù„ÙˆØ¯ÙŠ",
      "Ø§Ù„ÙƒÙØ± 3 Ø¨Ø¬ÙˆØ§Ø± Ù…Ù„Ø¹Ø¨ Ø¨Ø±Ø´Ù„ÙˆÙ†Ø© - Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©", "Ø£Ø¨Ùˆ Ø±Ø´Ø§Ø¯ Ù…Ù‚Ù‡Ù‰ Ø£Ø¨Ùˆ Ø³Ù„ÙŠÙ…Ø§Ù† - Ù…Ø­Ù…Ø¯ Ø±Ø´Ø§Ø¯",
      "Ø­ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡ - Ø±Ø´Ø§Ø¯ Ø¹Ø¨Ø¯ Ø§Ù„ÙˆÙ‡Ø§Ø¨", "Ø¨Ø­Ø± Ø§Ù„Ø¨Ù„Ø¯ 3 - Ù…Ù†ØµÙˆØ± Ø§Ù„Ø¨Ø¯Ø±ÙŠ",
      "Ø­ÙŠ Ø§Ù„Ø³Ù„Ù…ÙˆÙ†ÙŠ - Ø­Ø³Ù† Ø§Ù„Ù…Ù†Ø§Ø®Ù„Ù‰", "Ø­Ù‰ Ù…Ø²Ù„ÙØ§Ù† Ø§Ù„Ø¹Ù„Ù…ÙŠ -Ø£Ø¨ÙˆØ¹Ù„Ø§Ø¡",
      "Ø­ÙŠ Ø§Ù„Ø¨ØµÙ„Ù‡ Ø­Ù…ÙˆØ¯-Ø¹Ø¨Ø¯ Ø§Ù„Ø­Ù…ÙŠØ¯", "Ø­Ù‰ Ø§Ù„Ø¬Ø±Ù† 3 -Ù‚Ù‡ÙˆØ© Ø§Ù„Ù†Ø¬Ø¯ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù†Ø¬Ø¯ÙŠ",
      "Ø§Ù„Ù…Ø²Ø±Ø¹Ø©", "Ø£Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„Ø©",
      "Ø§Ù„ÙØ±ÙˆØ³Ø§Øª", "Ø£Ø¨Ùˆ Ø§Ù„Ø£Ø®Ø¶Ø±", "Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…Ù†Ø²Ù„Ø©", "Ø§Ù„Ø¹Ø§Ù…Ø±Ø©", "Ù…ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©",
      "Ø¹Ø±Ø¨ Ø²ÙŠØ¯Ø§Ù†", "Ø§Ù„Ø³ØªØ§ÙŠØªØ©", "ÙƒÙØ± Ø­Ø¬Ø§Ø¬", "Ù…ÙŠØª Ø®Ø¶ÙŠØ±", "Ø§Ù„Ù…ÙˆØ§Ø¬Ø¯",
      "Ø§Ù„Ø¨ØµØ±Ø§Ø·", "Ù…ÙŠØª Ø´Ø±ÙŠÙ", "Ø§Ù„Ø·ÙˆØ§Ø¨Ø±Ø©", "Ø§Ù„Ø¹Ù…Ø§Ø±Ù†Ø©", "Ø§ÙˆÙ„Ø§Ø¯ Ø¨Ø§Ù†Ø§",
      "Ø§ÙˆÙ„Ø§Ø¯ Ø­Ø§Ù†Ø§", "Ø¨Ø­Ø± Ø­Ø§Ø¯ÙˆØ«", "Ø§Ù„Ù‚Ø²Ø§Ù‚Ø²Ø©", "Ø§Ù„Ø­ÙˆØªØ©", "Ø§ÙˆÙ„Ø§Ø¯ Ù†ÙˆØ±",
      "Ø§Ù„Ø®Ù„Ø§ÙŠÙØ©", "Ø§Ù„Ù‚Ø·Ø´Ø©", "Ø§Ù„Ø¬Ù…Ø§Ù…Ù„Ø©", "Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ø²ÙŠØ²Ø©", "Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠØ©",
      "Ø§Ù„Ø¹Ø±Ø¨Ø§Ù†", "Ø§ÙˆÙ„Ø§Ø¯ Ø¹Ù„Ù…", "Ø§ÙˆÙ„Ø§Ø¯ Ù†Ø§ØµØ±", "Ø¨Ù†ÙŠ Ù‡Ù„Ø§Ù„", "Ø§Ù„Ø´Ø¨ÙˆÙ„",
      "Ø§Ù„Ø±ÙˆØ¯Ø©", "Ø§Ù„Ù†Ø³Ø§ÙŠÙ…Ø©", "Ø§Ù„Ù…Ø·Ø±ÙŠØ©", "Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹ØµØ§ÙØ±Ø©", "Ù‚Ø±ÙŠØ© Ø§Ù„Ø¶Ù‡ÙŠØ±"
    ];

    let currentDelay = 300; // Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
    let isRunning = false;
    let shouldStop = false;

    const ADMIN_PASSWORD = "521988"; // ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©

    window.setDelay = function(delay) {
      currentDelay = delay;
      document.querySelectorAll('.delay-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.closest('.delay-btn').classList.add('active');
      updateEstimatedTime();
    };

    function updateEstimatedTime() {
      const startCode = parseInt(document.getElementById('startCode').value);
      const endCode = parseInt(document.getElementById('endCode').value);
      const total = endCode - startCode + 1 + 1; // +1 Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚
      const timeInSeconds = Math.ceil((total * currentDelay) / 1000);
      document.getElementById('estimatedTime').textContent = timeInSeconds + 's';
      document.getElementById('totalCodes').textContent = total;
    }

    document.getElementById('startCode').addEventListener('input', updateEstimatedTime);
    document.getElementById('endCode').addEventListener('input', updateEstimatedTime);

    function addLog(message, type = 'info') {
      const logContainer = document.getElementById('logContainer');
      const logItem = document.createElement('div');
      logItem.className = `log-item log-${type}`;
      const time = new Date().toLocaleTimeString('ar-EG');
      logItem.textContent = `[${time}] ${message}`;
      logContainer.appendChild(logItem);
      logContainer.scrollTop = logContainer.scrollHeight;
    }

    function updateProgress(current, total) {
      const percentage = Math.round((current / total) * 100);
      const progressFill = document.getElementById('progressFill');
      progressFill.style.width = percentage + '%';
      progressFill.textContent = percentage + '%';

      document.getElementById('progressText').textContent = 
        `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©... (${current} Ù…Ù† ${total})`;
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    window.startSetup = async function() {
      const password = document.getElementById('adminPassword').value;

      if (password !== ADMIN_PASSWORD) {
        alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!');
        return;
      }

      const startCode = parseInt(document.getElementById('startCode').value);
      const endCode = parseInt(document.getElementById('endCode').value);
      const verifyCode = document.getElementById('verifyCode').value;

      if (startCode > endCode) {
        alert('âŒ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ÙˆÙ„ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£Ø®ÙŠØ±!');
        return;
      }

      const totalCodes = endCode - startCode + 1;

      if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ ${totalCodes} ÙƒÙˆØ¯ØŸ\nØ³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©.`)) {
        return;
      }

      isRunning = true;
      shouldStop = false;

      document.getElementById('startBtn').style.display = 'none';
      document.getElementById('stopBtn').style.display = 'block';
      document.getElementById('progressContainer').classList.add('active');
      document.getElementById('logContainer').innerHTML = '';

      addLog('ğŸš€ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯...', 'info');
      addLog(`ğŸ“Š Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${totalCodes} ÙƒÙˆØ¯ Ù…Ù† ${startCode} Ø¥Ù„Ù‰ ${endCode}`, 'info');
      addLog(`â±ï¸ Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ù…Ø­Ø¯Ø¯: ${currentDelay}ms`, 'info');

      try {
        let processed = 0;
        const total = totalCodes + 1; // +1 Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚

        // Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø£Ù…Ø§ÙƒÙ†
        for (let i = 0; i < totalCodes; i++) {
          if (shouldStop) {
            addLog('â¸ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', 'warning');
            break;
          }

          const code = startCode + i;
          const placeIdx = i;

          if (placeIdx >= places.length) {
            addLog(`âš ï¸ ØªØ­Ø°ÙŠØ±: Ø§Ù„ÙƒÙˆØ¯ ${code} Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ù‡ Ù…ÙƒØ§Ù† Ù…Ø·Ø§Ø¨Ù‚`, 'warning');
            continue;
          }

          const place = places[placeIdx];

          try {
            await set(ref(db, `login_codes/${code}`), {
              place: place,
              placeIdx: i + 1
            });

            processed++;
            updateProgress(processed, total);
            addLog(`âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ ${code}: ${place}`, 'success');

            // ØªØ£Ø®ÙŠØ± Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø­Ø¸Ø±
            await sleep(currentDelay);

          } catch (error) {
            addLog(`âœ— Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ ${code}: ${error.message}`, 'error');
          }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚
        if (!shouldStop) {
          try {
            await set(ref(db, `login_codes/${verifyCode}`), {
              place: "Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©",
              placeIdx: 0
            });

            processed++;
            updateProgress(processed, total);
            addLog(`âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚: ${verifyCode}`, 'success');

          } catch (error) {
            addLog(`âœ— Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚: ${error.message}`, 'error');
          }
        }

        if (!shouldStop) {
          addLog('âœ… ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'success');
          addLog(`ğŸ“Š ØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© ${processed} Ù…Ù† ${total} ÙƒÙˆØ¯`, 'info');
          alert('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø¨Ù†Ø¬Ø§Ø­!');
        }

      } catch (error) {
        addLog(`âŒ Ø®Ø·Ø£ Ø¹Ø§Ù…: ${error.message}`, 'error');
        alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message);
      } finally {
        isRunning = false;
        document.getElementById('startBtn').style.display = 'block';
        document.getElementById('stopBtn').style.display = 'none';
      }
    };

    window.stopSetup = function() {
      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŸ')) {
        shouldStop = true;
        addLog('â¸ï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù...', 'warning');
      }
    };

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    updateEstimatedTime();
  </script>
</body>
</html>
